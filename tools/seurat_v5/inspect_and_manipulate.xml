<tool id="seurat_create" name="Seurat Data Management" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>- Inspect and Manipulate </description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="version_command"/>
    <command detect_errors="exit_code"><![CDATA[
@CMD@
    ]]></command>
    <configfiles>
        <configfile name="script_file"><![CDATA[
@CMD_imports@
@CMD_read_inputs@

#if $method.method == 'Inspect'

seurat_obj<-CreateSeuratObject(
    seurat_obj,
)


#else if $method.method == 'Manipulate_Cells'

#else if $method.method == 'Manipulate_Genes'

#end if

@CMD_rds_write_outputs@

]]></configfile>
    </configfiles>
    <inputs>
        <expand macro="input_rds"/>
        <conditional name="method">
            <param name="method" type="select" label="Method used">
                <option value="Inspect">Inspect Seurat Object</option>
                <option value="Manipulate_Cells">Manipulate Cells</option>
                <option value="Manipulate_Features">Manipulate Features</option>
                <option value="Manipulate_Assays">Manipulate Assays</option>
                <option value="Manipulate_Layers">Manipulate Layers</option>
            </param>
            <when value="Inspect">
                <conditional name="Inspect">
                    <param name="inspect" type="select" label="Display information about">
                        <option value="features">features</option>
                        <option value="cells">cells</option>
                        <option value="assays">assays</option>
                        <option value="layers">layers</option>
                    </param>
                </conditional>
            </when>
            <when value="Manipulate_Cells">
                <conditional name="cells">
                    <param name="cells" type="select" label="Operation to perform on cells">
                        <option value="subset">Subset a group of cells</option>
                        <option value="add">Add cell metadata</option>
                        <option value="remove">Remove cell metadata</option>
                        <option value="rename">Rename cell metadata</option>
                    </param>
                </conditional>

            </when>
            <when value="Manipulate_Features">

            </when>
            <when value="Manipulate_Assays">

            </when>
            <when value="Manipulate_Layers">
                <conditional name="layers">
                    <param name="layers" type="select" label="Operation to perform on layers">
                        <option value="split">Split Seurat object into layers</option>
                        <option value="JoinLayers">Join layers in a Seurat object</option>
                        <option value="add">Add a new layer</option>
                        <option value="remove">Remove a layer</option>
                        <option value="rename">Rename a layer</option>
                    </param>
                </conditional>

            </when>
        </conditional>
        <expand macro="inputs_common_advanced"/>
    </inputs>
    <outputs>
        <expand macro="seurat_outputs"/>
    </outputs>
    <tests>
        <test expect_num_outputs="2">
            <!-- test1:  -->
            <param name="seurat_rds" location="https://zenodo.org/records/12743815/files/filtered.rds"/>
            <conditional name="method">
                <param name="method" value="CreateSeuratObject"/>
                <param name="assay" value="RNA"/>
                <param name="percent_mt" value="TRUE"/>
            </conditional>
            <section name="advanced_common">
                <param name="show_log" value="true"/>
            </section>
            <output name="hidden_output">
                <assert_contents>
                    <has_text_matching expression="CreateSeuratObject"/>
                </assert_contents>
            </output>
            <output name="rds_out" file="output.rds" ftype="rds">
            </output>
        </test>
    </tests>
    <help><![CDATA[
Seurat
======

Seurat is an R package designed for QC, analysis, and exploration of single-cell RNA-seq data. 

Seurat aims to enable users to identify and interpret sources of heterogeneity from single-cell transcriptomic measurements, and to integrate diverse types of single-cell data.


CreateSeuratObject
==================

Create a Seurat Object from raw data in RDS format - a single cell matrix with cells as rows and genes as columns. 

More details on the `seurat documentation
<https://satijalab.github.io/seurat-object/reference/CreateSeuratObject.html>`__



    ]]></help>
    <expand macro="citations"/>
</tool>