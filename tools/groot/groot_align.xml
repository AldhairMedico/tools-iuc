<tool id="groot_align" name="Groot align" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>reads against the indexed variation graphs</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="xrefs"/>
    <expand macro="requirements"/>
    <command detect_errors="exit_code"><![CDATA[
mkdir input_dir &&
ln -s '{$groot_index}' input_dir/ &&
ln -s '{$groot_genomegraphs}' input_dir/ &&
groot align
    -i input_dir
    -f '$input_fastq'
    -t '$threshold'
    > '$output_bam'
]]></command>
    <inputs>
        <param type="data" name="groot_index" format="LSH" label="Specify groot LSH file" help="-i" />
        <param type="data" name="groot_genomegraphs" format="gg" label="Specify groot GG file" help="-i" />
        <param type="data" name="input_fastq" format="fastq" label="What FASTQ reads to align" help="-f" />
        <param type="float" name="threshold" min="0" max="1.0" value="0.97" label="The containment threshold for seeding reads" />
    </inputs>
    <outputs>
        <data name="output_bam" format="bam" label="${tool.name} on ${on_string}"/>
    </outputs>
    <tests>
        <test>
            <param name="groot_index" value="groot.lshe"/>
            <param name="groot_genomegraphs" value="groot.gg"/>
            <param name="input_fastq" value="bla-b7-150bp-5x.fq"/>
            <param name="threshold" value="0.97"/>
            <output name="output_bam" file="groot.bam"/>
        </test>
    </tests>
    <help><![CDATA[
**What it does**

The align subcommand is used to align reads against the indexed variation graphs. 

**Output**

The output alignment is essentially the ARG classified reads (which may be useful) and can then be used to report full-length ARGs (using the report subcommand)
    ]]></help>
    <expand macro="citations"/>
</tool>